<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta name=viewport content="width=device-width,initial-scale=1"><title>How do OpenShift Over The Air Updates Work? | GUI Free Life</title><meta name=author content="Dale Bewley"><meta name=keywords content="bewley,guifreelife,openshift,OCP4,operators,webinar"><meta name=description content="GUI Free Life, by Dale Bewley covers Kubernetes, Linux, Networking, OpenShift and more"><meta name=generator content="Hugo 0.119.0"><link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel=stylesheet type=text/css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.11.2/css/all.css><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link href=/css/animate.css rel=stylesheet><link href=/css/style.turquoise.css rel=stylesheet id=theme-stylesheet><link href=/css/custom.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link href=/css/owl.carousel.css rel=stylesheet><link href=/css/owl.theme.css rel=stylesheet><link rel=alternate href=http://guifreelife.com/index.xml type=application/rss+xml title="GUI Free Life"><meta property="og:locale" content="en_us"><meta property="og:site_name" content="GUI Free Life"><meta property="og:title" content="How do OpenShift Over The Air Updates Work?"><meta property="og:type" content="article"><meta property="og:url" content="http://guifreelife.com/blog/2021/03/09/Understanding-OpenShift-Over-The-Air-Updates/"><meta property="og:description" content="GUI Free Life, by Dale Bewley covers Kubernetes, Linux, Networking, OpenShift and more"><meta property="og:image" content="http://guifreelife.com/images/the-face-of-a-computer-operator-from-the-2134th-communications-squadron-is-2ca9c9.jpg"><meta property="og:image:type" content="image/jpg"><meta property="og:image:width" content="640"><meta property="og:image:height" content="421"><meta property="og:updated_time" content="2021-03-09T00:00:00Z"><meta property="article:tag" content="openshift"><meta property="article:tag" content="OCP4"><meta property="article:tag" content="operators"><meta property="article:tag" content="webinar"><meta property="article:published_time" content="2021-03-09T00:00:00Z"><meta property="article:modified_time" content="2021-03-09T00:00:00Z"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@dlbewley"><meta name=twitter:title content="How do OpenShift Over The Air Updates Work?"><meta name=twitter:image content="http://guifreelife.com/images/the-face-of-a-computer-operator-from-the-2134th-communications-squadron-is-2ca9c9.jpg"><meta name=twitter:description content="GUI Free Life, by Dale Bewley covers Kubernetes, Linux, Networking, OpenShift and more"></head><body><div id=all><header class=navbar-affixed-top data-spy=affix data-offset-top=62><div class="navbar navbar-default yamm" role=navigation id=navbar><div class=container><div class=navbar-header><a class="navbar-brand home" href=/><img src=/img/logo.png alt="How do OpenShift Over The Air Updates Work? logo" class="hidden-xs hidden-sm">
<img src=/img/logo-small.png alt="How do OpenShift Over The Air Updates Work? logo" class="visible-xs visible-sm">
<span class=sr-only>How do OpenShift Over The Air Updates Work? - go to homepage</span></a><div class=navbar-buttons><button type=button class="navbar-toggle btn-template-main" data-toggle=collapse data-target=#navigation>
<span class=sr-only>Toggle Navigation</span>
<i class="fas fa-align-justify"></i></button></div></div><div class="navbar-collapse collapse" id=navigation><ul class="nav navbar-nav navbar-right"><li class=dropdown><a href=/>Home</a></li><li class="dropdown active"><a href=/blog/>Blog</a></li><li class=dropdown><a href=/contact/>Contact</a></li></ul></div><div class="collapse clearfix" id=search><form class=navbar-form role=search><div class=input-group><input type=text class=form-control placeholder=Search>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div></div></header><style>.bar.background-image-fixed-banner{background:url(/images/the-face-of-a-computer-operator-from-the-2134th-communications-squadron-is-2ca9c9.jpg)50% 0 no-repeat;background-attachment:fixed;background-size:cover;padding:100px 5%;text-shadow:2px 3px 4px var(--primary-accent),0 0 1em var(--navbar-border-top)}</style><div><div class=container><div class=row><div class=col-md-12><section class="bar background-image-fixed-banner heading h2 color-white text-center"><h1>How do OpenShift Over The Air Updates Work?</h1></section></div></div></div></div><div id=content><div class=container><div class=row><div class=col-md-9 id=blog-post><p class="text-muted text-uppercase mb-small text-right">March 9, 2021</p><div id=post-content><p>OpenShift 4 extends the <a href=https://coreos.com/blog/introducing-operator-framework title="Introducing Operator Framework">operator pattern introduced by CoreOS</a>, and enables automated management of the Kubernetes cluster and the underlying resources including machine instances and operating system configuration. Operator driven over the air updates enable automated updates much like you are accustomed to receiving for your smart phone. What follows is a a technical exploration of the OpenShift over the air updates implementation.</p><h1 id=operators-all-the-way-down>Operators All the Way Down</h1><p><a href=https://nara.getarchive.net/media/the-face-of-a-computer-operator-from-the-2134th-communications-squadron-is-2ca9c9><img src=/images/the-face-of-a-computer-operator-from-the-2134th-communications-squadron-is-2ca9c9.jpg alt="Computer Operator"></a></p><p><strong>What is an &ldquo;Operator&rdquo;?</strong></p><blockquote><p><a href=https://docs.openshift.com/container-platform/latest/operators/olm-what-operators-are.html title="What are Operators? OpenShift Documentation">An Operator is</a> a method of packaging, deploying, and managing a <em>Kubernetes application</em>.</p></blockquote><p><strong>What is a &ldquo;Kubernetes application&rdquo;?</strong></p><blockquote><p><a href=https://docs.openshift.com/container-platform/latest/operators/olm-what-operators-are.html title="What are Operators? OpenShift Documentation">A Kubernetes application is</a> an application that is both deployed on Kubernetes and managed using the Kubernetes APIs.</p></blockquote><p>By creating APIs and <a href=https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/>Custom Resource Definitions</a> for all aspects of a cluster, OpenShift essentially turns the cluster into a &ldquo;kubernetes application&rdquo;.</p><p>For example here is a list of machine configuration related CRDs now available for management by Kubernetes.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc api-resources --api-group=machineconfiguration.openshift.io
</span></span><span style=display:flex><span>NAME                      SHORTNAMES   APIGROUP                            NAMESPACED   KIND
</span></span><span style=display:flex><span>containerruntimeconfigs   ctrcfg       machineconfiguration.openshift.io   <span style=color:#658b00>false</span>        ContainerRuntimeConfig
</span></span><span style=display:flex><span>controllerconfigs                      machineconfiguration.openshift.io   <span style=color:#658b00>false</span>        ControllerConfig
</span></span><span style=display:flex><span>kubeletconfigs                         machineconfiguration.openshift.io   <span style=color:#658b00>false</span>        KubeletConfig
</span></span><span style=display:flex><span>machineconfigpools        mcp          machineconfiguration.openshift.io   <span style=color:#658b00>false</span>        MachineConfigPool
</span></span><span style=display:flex><span>machineconfigs            mc           machineconfiguration.openshift.io   <span style=color:#658b00>false</span>        MachineConfig
</span></span></code></pre></div><h1 id=operators-manage-the-workloads>Operators Manage the Workloads</h1><p>The <a href=https://github.com/operator-framework/operator-sdk title="Operator SDK Repository">Operator SDK</a> behind this work leverages technologies including Ansible, Helm, and Golang to bundle software and related operational knowledge into a Kubernetes Operator. OpenShift enables easy installation of community and ISV applications from customizatble catalog sources such as <a href=https://operatorhub.io/>OperatorHub</a> and <a href=https://marketplace.redhat.com/>Red Hat Marketplace</a>.</p><p>After installation of a workload operator, the update or removal is managed by the <a href=https://github.com/operator-framework/operator-lifecycle-manager title="Operator Lifecycle Manager">Operator Lifecycle Manager</a> or OLM. When a new release of the operator is published the OLM facilitates an update to the new operator bundle.</p><p>You can see the list of installed optional workload operators with the <code>oc get operators</code> command.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc get operators
</span></span><span style=display:flex><span>NAME                                                  AGE
</span></span><span style=display:flex><span>advanced-cluster-management.open-cluster-management   65d
</span></span><span style=display:flex><span>argocd-operator.dale                                  21d
</span></span><span style=display:flex><span>container-security-operator.openshift-operators       54d
</span></span><span style=display:flex><span>kubevirt-hyperconverged.openshift-cnv                 71d
</span></span><span style=display:flex><span>podium-operator-bundle.dale                           54d
</span></span><span style=display:flex><span>splunk-certified.splunk                               56d
</span></span></code></pre></div><p>This post will focus less on workload operators and more on cluster operators.</p><h1 id=operators-manage-the-platform>Operators Manage the Platform</h1><p>There is a <a href=https://docs.openshift.com/container-platform/latest/operators/operator-reference.html title="Red Hat Operators">set of operators</a> that do not require manual installation. These operators comprise the services such as DNS, etcd, monitoring, and cloud API automation that make up the OpenShift cluster.</p><p>These are called exposed by a the <a href=https://github.com/openshift/cluster-version-operator/blob/master/docs/dev/clusteroperator.md title="Cluster Operator">ClusterOperator</a> custom resource. You can see them with the <code>oc get clusteroperators</code> command.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc get clusteroperators
</span></span><span style=display:flex><span>NAME                                       VERSION   AVAILABLE   PROGRESSING   DEGRADED   SINCE
</span></span><span style=display:flex><span>authentication                             4.6.12    True        False         False      5m9s
</span></span><span style=display:flex><span>cloud-credential                           4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>cluster-autoscaler                         4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>config-operator                            4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>console                                    4.6.12    True        False         False      2d9h
</span></span><span style=display:flex><span>csi-snapshot-controller                    4.6.12    True        False         False      13h
</span></span><span style=display:flex><span>dns                                        4.6.12    True        False         False      89d
</span></span><span style=display:flex><span>etcd                                       4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>image-registry                             4.6.12    True        False         False      82d
</span></span><span style=display:flex><span>ingress                                    4.6.12    True        False         False      7d18h
</span></span><span style=display:flex><span>insights                                   4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>kube-apiserver                             4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>kube-controller-manager                    4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>kube-scheduler                             4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>kube-storage-version-migrator              4.6.12    True        False         False      74m
</span></span><span style=display:flex><span>machine-api                                4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>machine-approver                           4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>machine-config                             4.6.12    True        False         False      4m30s
</span></span><span style=display:flex><span>marketplace                                4.6.12    True        False         False      3d17h
</span></span><span style=display:flex><span>monitoring                                 4.6.12    True        False         False      84m
</span></span><span style=display:flex><span>network                                    4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>node-tuning                                4.6.12    True        False         False      6d18h
</span></span><span style=display:flex><span>openshift-apiserver                        4.6.12    True        False         False      4m57s
</span></span><span style=display:flex><span>openshift-controller-manager               4.6.12    True        False         False      10d
</span></span><span style=display:flex><span>openshift-samples                          4.6.12    True        False         False      6d18h
</span></span><span style=display:flex><span>operator-lifecycle-manager                 4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>operator-lifecycle-manager-catalog         4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>operator-lifecycle-manager-packageserver   4.6.12    True        False         False      7m22s
</span></span><span style=display:flex><span>service-ca                                 4.6.12    True        False         False      102d
</span></span><span style=display:flex><span>storage                                    4.6.12    True        False         False      77d
</span></span></code></pre></div><p>By examining these cluster operators with <code>oc describe</code> you can deduce a sense of their purpose and context.
For example you can see that the &ldquo;authentication&rdquo; clusteroperator has a relation to the namespace &ldquo;openshift-authentication&rdquo;. This would be a logical place to look for further details such as events and pod logs.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc describe clusteroperator/authentication
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>         </span>authentication<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>Namespace</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>Labels</span>:<span style=color:#bbb>       </span>&lt;none&gt;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>Annotations:  exclude.release.openshift.io/internal-openshift-hosted</span>:<span style=color:#bbb> </span><span style=color:#8b008b;font-weight:700>true</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>              </span><span style=color:#8b008b;font-weight:700>include.release.openshift.io/self-managed-high-availability</span>:<span style=color:#bbb> </span><span style=color:#8b008b;font-weight:700>true</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>API Version</span>:<span style=color:#bbb>  </span>config.openshift.io/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>Kind</span>:<span style=color:#bbb>         </span>ClusterOperator<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>Metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>snip...<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>Status</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>Related Objects</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Group</span>:<span style=color:#bbb>      </span>operator.openshift.io<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>       </span>cluster<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Resource</span>:<span style=color:#bbb>   </span>authentications<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Group</span>:<span style=color:#bbb>      </span>config.openshift.io<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>       </span>cluster<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Resource</span>:<span style=color:#bbb>   </span>authentications<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Group</span>:<span style=color:#bbb>      </span>config.openshift.io<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>       </span>cluster<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Resource</span>:<span style=color:#bbb>   </span>infrastructures<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Group</span>:<span style=color:#bbb>      </span>config.openshift.io<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>       </span>cluster<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Resource</span>:<span style=color:#bbb>   </span>oauths<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Group</span>:<span style=color:#bbb>      </span>route.openshift.io<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>       </span>oauth-openshift<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Namespace</span>:<span style=color:#bbb>  </span>openshift-authentication<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Resource</span>:<span style=color:#bbb>   </span>routes<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Group</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>       </span>oauth-openshift<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Namespace</span>:<span style=color:#bbb>  </span>openshift-authentication<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Resource</span>:<span style=color:#bbb>   </span>services<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Group</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>       </span>openshift-authentication<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Resource</span>:<span style=color:#bbb>   </span>namespaces<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Group</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>       </span>openshift-authentication-operator<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>snip...<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>Versions</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>     </span>oauth-apiserver<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Version</span>:<span style=color:#bbb>  </span><span style=color:#b452cd>4.6.12</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>     </span>operator<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Version</span>:<span style=color:#bbb>  </span><span style=color:#b452cd>4.6.12</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Name</span>:<span style=color:#bbb>     </span>oauth-openshift<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>Version</span>:<span style=color:#bbb>  </span><span style=color:#b452cd>4.6</span>.12_openshift<span style=color:#bbb>
</span></span></span></code></pre></div><p>These operators watch for specific custom resources that they understand how to implement. For example, the <code>authentication</code> operator understands how to turn an <code>authentication</code> custom resource into an appropriately configured service.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc api-resources --api-group=config.openshift.io --sort-by=name
</span></span><span style=display:flex><span>NAME               SHORTNAMES   APIGROUP              NAMESPACED   KIND
</span></span><span style=display:flex><span>apiservers                      config.openshift.io   <span style=color:#658b00>false</span>        APIServer
</span></span><span style=display:flex><span>authentications                 config.openshift.io   <span style=color:#658b00>false</span>        Authentication
</span></span><span style=display:flex><span>builds                          config.openshift.io   <span style=color:#658b00>false</span>        Build
</span></span><span style=display:flex><span>clusteroperators   co           config.openshift.io   <span style=color:#658b00>false</span>        ClusterOperator
</span></span><span style=display:flex><span>clusterversions                 config.openshift.io   <span style=color:#658b00>false</span>        ClusterVersion
</span></span><span style=display:flex><span>consoles                        config.openshift.io   <span style=color:#658b00>false</span>        Console
</span></span><span style=display:flex><span>dnses                           config.openshift.io   <span style=color:#658b00>false</span>        DNS
</span></span><span style=display:flex><span>featuregates                    config.openshift.io   <span style=color:#658b00>false</span>        FeatureGate
</span></span><span style=display:flex><span>images                          config.openshift.io   <span style=color:#658b00>false</span>        Image
</span></span><span style=display:flex><span>infrastructures                 config.openshift.io   <span style=color:#658b00>false</span>        Infrastructure
</span></span><span style=display:flex><span>ingresses                       config.openshift.io   <span style=color:#658b00>false</span>        Ingress
</span></span><span style=display:flex><span>networks                        config.openshift.io   <span style=color:#658b00>false</span>        Network
</span></span><span style=display:flex><span>oauths                          config.openshift.io   <span style=color:#658b00>false</span>        OAuth
</span></span><span style=display:flex><span>operatorhubs                    config.openshift.io   <span style=color:#658b00>false</span>        OperatorHub
</span></span><span style=display:flex><span>projects                        config.openshift.io   <span style=color:#658b00>false</span>        Project
</span></span><span style=display:flex><span>proxies                         config.openshift.io   <span style=color:#658b00>false</span>        Proxy
</span></span><span style=display:flex><span>schedulers                      config.openshift.io   <span style=color:#658b00>false</span>        Scheduler
</span></span></code></pre></div><p>To understand how to define an &ldquo;authentication&rdquo;, in addition to the product documentation, you can refer to the <code>spec</code> in <a href=https://docs.openshift.com/container-platform/4.6/rest_api/config_apis/authentication-config-openshift-io-v1.html>the API documentation</a> Or take advantage of the explain command eg. <code>oc explain DNS; oc explain DNS.spec</code>.</p><h2 id=cluster-version-operator>Cluster Version Operator</h2><p>These cluster operators like &ldquo;authentication&rdquo; and &ldquo;console&rdquo; report their status and are kept in up to date by the <a href=https://github.com/openshift/cluster-version-operator>Cluster Version Operator</a>. The CVO is responsible for orchestrating over the air updates to the cluster. By acting on a payload representing the artifacts which make up an OpenShift release, the CVO ensures that everything from the RHEL CoreOS version on the nodes to the OpenShift web console are running on the same release.</p><p>So how does the CVO learn what upgrades are available?</p><h3 id=openshift-update-service>OpenShift Update Service</h3><p>The updates made available to OpenShift are published using a protocol dubbed <a href=https://github.com/openshift/cincinnati/>Cincinnati</a>. The update service takes advantage of integration tests and telemetry data to present only the updates that are as reliable as possible.</p><p>As updates graduate from <em>candidate</em> to <em>fast</em> to <em>stable</em> or possibly <em>EUS</em> they are presented for consumption in the corresponding release <a href=https://github.com/openshift/cincinnati-graph-data/tree/master/channels>channel</a>. If a an issue is discovered after release through testing or telemetry feedback, a release may be pulled and no longer show up in the graph as a possible update target. This is why it is important to never force an upgrade.</p><p>More detail may be found in
<a href=https://docs.openshift.com/container-platform/latest/updating/updating-cluster-between-minor.html title="Upgrading Between Minor Releases OpenShift Documentation">the documentation</a> and <a href=https://www.openshift.com/blog/openshift-update-service-update-manager-for-your-cluster title=openshift-update-service-update-manager-for-your-cluster>this blog post</a> describing support for a locally hosted OpenShift Update Service.</p><p>The source of our update graph can be seen in ClusterVersion resource nameed &ldquo;version&rdquo;. An alternative command would be <code>oc describe clusterversion</code>. Notice this cluster is tracking the <em>stable-4.6</em> channel and retrieving the graph from <code>https://api.openshift.com/api/upgrades_info/v1/graph</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc get ClusterVersion/version -o <span style=color:#00688b>jsonpath</span>=<span style=color:#cd5555>&#34;{.spec}&#34;</span> | jq
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#8b008b;font-weight:700>&#34;channel&#34;</span>: <span style=color:#cd5555>&#34;stable-4.6&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#8b008b;font-weight:700>&#34;clusterID&#34;</span>: <span style=color:#cd5555>&#34;e640ac63-7a14-4f72-99c5-e363a071e2d8&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#8b008b;font-weight:700>&#34;desiredUpdate&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#8b008b;font-weight:700>&#34;image&#34;</span>: <span style=color:#cd5555>&#34;quay.io/openshift-release-dev/ocp-release@sha256:5c3618ab914eb66267b7c552a9b51c3018c3a8f8acf08ce1ff7ae4bfdd3a82bd&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#8b008b;font-weight:700>&#34;version&#34;</span>: <span style=color:#cd5555>&#34;4.6.12&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#8b008b;font-weight:700>&#34;upstream&#34;</span>: <span style=color:#cd5555>&#34;https://api.openshift.com/api/upgrades_info/v1/graph&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The <code>oc adm upgrade</code> command will use the information from that graph and present any suitable updates.
<a href=https://access.redhat.com/labs/ocpupgradegraph/update_channel title="Red Hat OpenShift Container Platform Update Graph">Red Hat OpenShift Container Platform Update Graph</a> generates a dynamic graphical representation of the update options.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc adm upgrade
</span></span><span style=display:flex><span>Cluster version is 4.6.12
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Updates:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>VERSION IMAGE
</span></span><span style=display:flex><span>4.6.13  quay.io/openshift-release-dev/ocp-release@sha256:8a9e40df2a19db4cc51dc8624d54163bef6e88b7d88cc0f577652ba25466e338
</span></span><span style=display:flex><span>4.6.15  quay.io/openshift-release-dev/ocp-release@sha256:b70f550e3fa94af2f7d60a3437ec0275194db36f2dc49991da2336fe21e2824c
</span></span></code></pre></div><h2 id=examining-the-content-of-a-release-payload>Examining the Content of a Release Payload</h2><p>We can get some info about a release, including the list of container images providing cluster operators, with the <code>oc adm release info</code> command.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc adm release info <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>quay.io/openshift-release-dev/ocp-release@sha256:8a9e40df2a19db4cc51dc8624d54163bef6e88b7d88cc0f577652ba25466e338
</span></span><span style=display:flex><span>Name:      4.6.13
</span></span><span style=display:flex><span>Digest:    sha256:8a9e40df2a19db4cc51dc8624d54163bef6e88b7d88cc0f577652ba25466e338
</span></span><span style=display:flex><span>Created:   2021-01-20T13:12:02Z
</span></span><span style=display:flex><span>OS/Arch:   linux/amd64
</span></span><span style=display:flex><span>Manifests: <span style=color:#b452cd>444</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Pull From: quay.io/openshift-release-dev/ocp-release@sha256:8a9e40df2a19db4cc51dc8624d54163bef6e88b7d88cc0f577652ba25466e338
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Release Metadata:
</span></span><span style=display:flex><span>  Version:  4.6.13
</span></span><span style=display:flex><span>  Upgrades: 4.5.21, 4.5.22, 4.5.23, 4.5.24, 4.5.27, 4.5.28, 4.6.1, 4.6.3, 4.6.4, 4.6.6, 4.6.8, 4.6.9, 4.6.10, 4.6.12
</span></span><span style=display:flex><span>  Metadata:
</span></span><span style=display:flex><span>    url: https://access.redhat.com/errata/RHBA-2021:0171
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Component Versions:
</span></span><span style=display:flex><span>  kubernetes 1.19.4
</span></span><span style=display:flex><span>  machine-os 46.82.202101191342-0 Red Hat Enterprise Linux CoreOS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Images:
</span></span><span style=display:flex><span>  NAME                                           DIGEST
</span></span><span style=display:flex><span>  aws-ebs-csi-driver                             sha256:8f34b0cc5c7554bdfacee78ebcb5747c22dd1bf72eb4dd6007c35830e9062106
</span></span><span style=display:flex><span>  aws-ebs-csi-driver-operator                    sha256:940d4757e6e0a603ef4fafd3d2772306b1d54f318696a35321e46ecaf2998284
</span></span><span style=display:flex><span>  aws-machine-controllers                        sha256:a1d91b36f474b371120ae5af9c67ef97fb06cffe9d6c96ff0d2367c7fe239a43
</span></span><span style=display:flex><span>  aws-pod-identity-webhook                       sha256:66bc5e8411973292c5f155ff5cb67569d2c081499dbf89f5c708504afa1ff600
</span></span><span style=display:flex><span>  azure-machine-controllers                      sha256:f40212ae38936c094dc16dbf2f4d1fefa5f0ee6b68e78afe72af3cfc6b0ce8f6
</span></span><span style=display:flex><span>  baremetal-installer                            sha256:8d2e5b267d9c45a2d808f6437023aceafad8c707cb94e57e325e3f0b2beadd62
</span></span><span style=display:flex><span>  baremetal-machine-controllers                  sha256:36b69cc3989b1b486e7078b544fe7316e92d92ab0f1a139bcb7b1acdd1d54f14
</span></span><span style=display:flex><span>  baremetal-operator                             sha256:ca65a235189a2929df9615995dd5f27a9ab3cda95a311cda9421cc21489e15be
</span></span><span style=display:flex><span>  baremetal-runtimecfg                           sha256:34b95e9d96daeb80c08dbdf8a66f5b8d4a2e51a86879edd91d7bb0b40df67093
</span></span><span style=display:flex><span>  cli                                            sha256:cf339d3bac5ecf4ee836f72bd1b3c4f0f7b0553dda63c3e73e6e2a7f1d1560ae
</span></span><span style=display:flex><span>  cli-artifacts                                  sha256:32b6f0648ed05d5e0109d651d32093209de7db8a116fbe25e0250fac65bd2901
</span></span><span style=display:flex><span>  cloud-credential-operator                      sha256:e490c84ffcfd6a07589eeb56600e04afc2e58edb3459643bd569be50e66e6061
</span></span><span style=display:flex><span>  cluster-authentication-operator                sha256:baa7275273e6a4e2adb75aced5485c880368d9260df03f832a2b0a4c6cb194e3
</span></span><span style=display:flex><span>  ...snip...
</span></span></code></pre></div><p>Pro Tip: <code>oc adm release info quay.io/openshift-release-dev/ocp-release:4.6.13-x86_64</code> would have also worked.</p><h2 id=managing-the-nodes>Managing the Nodes</h2><p>The machines which make up the cluster are also managed by operators. The <code>machine-api</code> operator interfaces with the underlying infrastructure provider (OpenStack, AWS, etc) to provision machines on Day 1 and the <code>machine-config</code> operator manages the resources that implement machine configuration.</p><p>Machines are provisioned by a technology called Ignition<a href=https://coreos.github.io/ignition/specs/ title="Ignition Specification">4</a>. Ignition can be thought of as a combination of Kickstart and Cloud-Init. When a machine is booted it is provided a URL to the machine config server which serves up an Ignition config. The config will include a reference to the RHCOS image to install on the host and every file and configuration detail to be applied.</p><p>Machines are grouped into pools and subscribe to corresponding MachineConfigPools which each have a unique machine configuration. Example pools include <em>master</em> or <em>worker</em> in this example below.</p><p><img src=/images/openshift-mcs-slide-640.png alt="Machine Config Server"></p><p>Since Ignition runs in the initial RAM disk (initrd), it has the ability to make low level changes to storage and networking without requiring a reboot.
If there are any errors reported by Ignition during the provisioning phase, the machine will not be placed into service.</p><p>The <code>machine-config</code> ClusterOperator has as an operand the <code>machine-config-daemon</code>. <a href=https://github.com/openshift/machine-config-operator/blob/master/docs/MachineConfigDaemon.md title=MachineConfigDaemon>The MCD</a> is deployed as a daemonset to all nodes and prevents configuration drift by checking in with the <code>machine-config-server</code>. When a change is detected between the currently applied machine configuration and the desired configuration the <code>machine-config-controller</code> <a href=https://github.com/openshift/machine-config-operator/blob/master/docs/MachineConfigController.md title=MachienConfigController>the MCC</a> will coordinate the application of the change in a controlled manner.</p><p>OpenShift 4 considers nodes to be immutable. That is to say, if they break or require a change they should be &ldquo;replaced&rdquo; or configured in whole rather than in part. A practical effect of this is that the only way to affect a change is to create a <a href=https://github.com/openshift/machine-config-operator/blob/master/docs/MachineConfiguration.md title=MachineConfig>MachineConfig</a> any change to a machine configuration requires a reapplication of all changes by way of a node reboot. The number of nodes impacted simultaneously may be configured with the <code>maxUnavailable</code> attribute of a MachineConfigPool which will be honored by the MCC.</p><h3 id=updating-node-operating-systems-with-libostree>Updating Node Operating Systems with libostree</h3><p>As shown above, the OpenShift release image contains a reference to a <a href=https://github.com/coreos/coreos-assembler title="CoreOS Assembler">specific release of RHCOS</a> eg. <code>machine-os 46.82.202101191342-0 Red Hat Enterprise Linux CoreOS</code>.</p><p>RHEL CoreOS like RHEL Atomic Host uses <a href=https://github.com/ostreedev/ostree title=OSTree>libostree</a> to apply operating system updates in a transactional manner. During an update the MCD downloads the container image provided in the <code>osImageURL</code> attribute of the Ignition config. This is image essentially a wrapper around an OSTree commit which is extracted and written to
<code>/ostree/deploy/rhcos/deploy/&lt;hash></code>. The boot configuration is then updated to point to the new OSTree where it will be used upon reboot.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sh-4.4# rpm-ostree status
</span></span><span style=display:flex><span>State: idle
</span></span><span style=display:flex><span>AutomaticUpdates: disabled
</span></span><span style=display:flex><span>Deployments:
</span></span><span style=display:flex><span>* pivot://quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:6069ffcc5dcd227c867a86970f3d2076221081a81b6c92fbecfd044ef160161e
</span></span><span style=display:flex><span>              CustomOrigin: Managed by machine-config-operator
</span></span><span style=display:flex><span>                   Version: 46.82.202101131942-0 (2021-01-13T19:45:25Z)
</span></span><span style=display:flex><span>                    Commit: 046de410ba240083996855d797207e09374bbfdf65e5be34baa1e1f1ab49918a
</span></span><span style=display:flex><span>                            |- art-rhaos-4.6 (2021-01-13T17:25:39Z)
</span></span><span style=display:flex><span>                            |- rhel8-fast-datapath (2020-11-23T19:03:06Z)
</span></span><span style=display:flex><span>                            |- rhel8-baseos (2021-01-12T14:14:01Z)
</span></span><span style=display:flex><span>                            <span style=color:#cd5555>`</span>- rhel8-appstream (2021-01-13T10:43:31Z)
</span></span><span style=display:flex><span>                    Staged: no
</span></span><span style=display:flex><span>                 StateRoot: rhcos
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  pivot://quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:4c5b83a192734ad6aa33da798f51b4b7ebe0f633ed63d53867a0c3fb73993024
</span></span><span style=display:flex><span>              CustomOrigin: Managed by machine-config-operator
</span></span><span style=display:flex><span>                   Version: 46.82.202012051820-0 (2020-12-05T18:24:10Z)
</span></span><span style=display:flex><span>                    Commit: 7e014b64b96536487eb3701fa4f0e604697730bde2f2f9034c4f56c024c67119
</span></span><span style=display:flex><span>                            |- art-rhaos-4.6 (2020-12-05T14:07:54Z)
</span></span><span style=display:flex><span>                            |- rhel8-fast-datapath (2020-11-23T19:03:06Z)
</span></span><span style=display:flex><span>                            |- rhel8-baseos (2020-11-23T17:53:53Z)
</span></span><span style=display:flex><span>                            <span style=color:#cd5555>`</span>- rhel8-appstream (2020-11-30T10:18:29Z)
</span></span><span style=display:flex><span>                 StateRoot: rhcos
</span></span></code></pre></div><h3 id=machine-config-daemon-troubleshooting>Machine Config Daemon Troubleshooting</h3><p>The MCD is of course running in a pod, so you can spy on its logs on each node and observe its actions or check for problems. For example, while unusual (I&rsquo;ve seen the following once), it adds some behind the scenes context. After finding a node as NotReady a problem with the boot config was exposed in the logs.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>oc project openshift-machine-config-operator
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>for</span> POD in <span style=color:#cd5555>`</span>oc get pod -o name -l k8s-app=machine-config-daemon<span style=color:#cd5555>`</span>; <span style=color:#8b008b;font-weight:700>do</span>
</span></span><span style=display:flex><span>  <span style=color:#658b00>echo</span> ----
</span></span><span style=display:flex><span>  <span style=color:#658b00>echo</span> Checking <span style=color:#00688b>$POD</span> <span style=color:#8b008b;font-weight:700>for</span> osImageURL mismatch
</span></span><span style=display:flex><span>  oc get <span style=color:#00688b>$POD</span> -o wide
</span></span><span style=display:flex><span>  <span style=color:#658b00>echo</span>
</span></span><span style=display:flex><span>  oc logs <span style=color:#00688b>$POD</span> -c  machine-config-daemon  | grep <span style=color:#cd5555>&#34;expected target osImageURL&#34;</span> | tail -1
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>done</span>
</span></span><span style=display:flex><span>...snip...
</span></span><span style=display:flex><span>----
</span></span><span style=display:flex><span>Checking pod/machine-config-daemon-nn5p8 <span style=color:#8b008b;font-weight:700>for</span> osImageURL mismatch
</span></span><span style=display:flex><span>NAME                          READY   STATUS    RESTARTS   AGE   IP             NODE                  NOMINATED NODE   READINESS GATES
</span></span><span style=display:flex><span>machine-config-daemon-nn5p8   2/2     Running   <span style=color:#b452cd>0</span>          15m   192.168.4.63   vipi-7zc6h-master-1   &lt;none&gt;           &lt;none&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>E0209 18:23:14.965590  <span style=color:#b452cd>116436</span> writer.go:135] Marking Degraded due to: unexpected on-disk state validating against <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span> rendered-master-ff38f849e21009792e7db36fe2c27ef9: expected target osImageURL <span style=color:#cd5555>&#34;quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:6069ffcc5dcd227c867a86970f3d2076221081a81b6c92fbecfd044ef160161e&#34;</span>,<span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span> have <span style=color:#cd5555>&#34;quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:4c5b83a192734ad6aa33da798f51b4b7ebe0f633ed63d53867a0c3fb73993024&#34;</span>
</span></span></code></pre></div><p>Updating the boot config allowed the host to come back into compliance.</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>oc debug node/vipi-7zc6h-master-1
</span></span><span style=display:flex><span>sh-4.4# chroot /host
</span></span><span style=display:flex><span>sh-4.4# rpm-ostree status -v
</span></span><span style=display:flex><span>...snip...
</span></span><span style=display:flex><span>sh-4.4# /run/bin/machine-config-daemon pivot quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:6069ffcc5dcd227c867a86970f3d207622108
</span></span><span style=display:flex><span>1a81b6c92fbecfd044ef160161e
</span></span><span style=display:flex><span>sh-4.4# reboot
</span></span></code></pre></div><p>Finally when the node is rebooted with the node annotations updated by the MachineConfigControllerare updated to reflect the state.
When the values of the <code>machineconfiguration.openshift.io/currentConfig</code> and <code>machineconfiguration.openshift.io/desiredConfig</code> annotations on the Node match the MCD is happy and so are we!</p><p>I could have also just deleted the node and allowed the machine api operator to automatically replace it, but I didn&rsquo;t even talk about <code>MachineSets</code> and node autoscaling! Maybe next time. :)</p><h1 id=summary>Summary</h1><p>This was admittedly heavy on external links and possibly &ldquo;hand wavy&rdquo; at points, but I hope it provides you a better sense of just exactly how OpenShift Over The Air Updates automate the administration of your entire Kubernetes cluster.</p><h2 id=watch-a-video-demonstration>Watch a Video Demonstration</h2><p>For more information on this topic including a video demonstration of the OpenShift 4 upgrade process, please see <a href=https://www.brighttalk.com/webcast/14777/433967 title="Over The Air Updates BrightTALK Video Presentation">my BrightTALK presentation</a> from September, 2020.</p><p><a href=https://www.brighttalk.com/webcast/14777/433967 title="Over The Air Updates BrightTALK Video Presentation"><img src=/images/openshift-ota-brighttalk.png alt="OpenShift Over The Air Updates BrightTALK"></a></p><h2 id=references>References</h2><ul><li><a href=https://www.brighttalk.com/webcast/14777/433967 title="Over The Air Updates BrightTALK Video Presentation">Red Hat OpenShift Cluster Services: Over The Air Updates Webinar</a></li><li><a href=https://docs.openshift.com/container-platform/latest/operators/olm-what-operators-are.html title="What are Operators? OpenShift Documentation">What are Operators?</a></li><li><a href=https://github.com/openshift/cluster-version-operator/blob/master/docs/dev/clusteroperator.md title="Cluster Operator">What are Cluster Operators?</a></li><li><a href=https://docs.openshift.com/container-platform/latest/operators/operator-reference.html title="Red Hat Operators">Cluster Operators Reference</a></li><li><a href=https://github.com/operator-framework/operator-sdk title="Operator SDK Repository">Operator SDK</a></li><li><a href=https://coreos.github.io/ignition/specs/ title="Ignition Specification">Ignition Configuration Specifications</a></li><li><a href=https://docs.openshift.com/container-platform/latest/updating/updating-cluster-between-minor.html title="Upgrading Between Minor Releases OpenShift Documentation">OpenShift Upgrading Between Minor Releases</a></li><li><a href=https://access.redhat.com/labs/ocpupgradegraph/update_channel title="Red Hat OpenShift Container Platform Update Graph">OpenShift Container Platform Update Graph</a></li><li><a href=https://github.com/openshift/machine-config-operator/blob/master/docs/MachineConfigDaemon.md title=MachineConfigDaemon>Machine Configuration Daemon</a></li><li><a href=https://github.com/openshift/machine-config-operator/blob/master/docs/MachineConfiguration.md title=MachineConfig>Machine Config Operator and MachineConfigs</a></li><li><a href=https://github.com/openshift/machine-config-operator/blob/master/docs/MachineConfigController.md title=MachienConfigController>Machine Config Operator and MachineConfigController</a></li><li><a href=https://github.com/openshift/machine-config-operator/blob/master/docs/OSUpgrades.md title="OS Updates">Machine Config Operator and OS Updates</a> includes some bootstrap tidbits</li><li><a href=https://openshift-release.apps.ci.l2s4.p1.openshiftapps.com/ title="OpenShift Continuous Delivery Pipeline Artifacts">OpenShift continuous delivery pipeline artifacts</a></li><li><a href=https://github.com/coreos/coreos-assembler title="CoreOS Assembler">CoreOS Assembler builds CoreOS Images</a></li><li><a href=https://github.com/ostreedev/ostree title=OSTree>OSTree or &ldquo;libostree&rdquo;</a></li></ul></div><div id=comments><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//dlbewleygithubio.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class=col-md-3><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Search</h3></div><div class=panel-body><form action=//google.com/search method=get accept-charset=utf-8 role=search><div class=input-group><input type=search name=q class=form-control placeholder=Search>
<input type=hidden name=sitesearch value=http://guifreelife.com/>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tagged</h3></div><div class=panel-body><ul class=tag-cloud><li class=active><a href=/tags/openshift><i class="fas fa-tags"></i> openshift</a></li><li class=active><a href=/tags/OCP4><i class="fas fa-tags"></i> OCP4</a></li><li class=active><a href=/tags/operators><i class="fas fa-tags"></i> operators</a></li><li class=active><a href=/tags/webinar><i class="fas fa-tags"></i> webinar</a></li></ul></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>TOC</h3></div><div class=panel-body><nav id=TableOfContents><ul><li><a href=#operators-all-the-way-down>Operators All the Way Down</a></li><li><a href=#operators-manage-the-workloads>Operators Manage the Workloads</a></li><li><a href=#operators-manage-the-platform>Operators Manage the Platform</a><ul><li><a href=#cluster-version-operator>Cluster Version Operator</a><ul><li><a href=#openshift-update-service>OpenShift Update Service</a></li></ul></li><li><a href=#examining-the-content-of-a-release-payload>Examining the Content of a Release Payload</a></li><li><a href=#managing-the-nodes>Managing the Nodes</a><ul><li><a href=#updating-node-operating-systems-with-libostree>Updating Node Operating Systems with libostree</a></li><li><a href=#machine-config-daemon-troubleshooting>Machine Config Daemon Troubleshooting</a></li></ul></li></ul></li><li><a href=#summary>Summary</a><ul><li><a href=#watch-a-video-demonstration>Watch a Video Demonstration</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tags</h3></div><div class=panel-body><ul class=tag-cloud><li><a href=/tags/AWS><i class="fas fa-tags"></i> AWS</a></li><li><a href=/tags/CDK><i class="fas fa-tags"></i> CDK</a></li><li><a href=/tags/OCP3><i class="fas fa-tags"></i> OCP3</a></li><li><a href=/tags/OCP4><i class="fas fa-tags"></i> OCP4</a></li><li><a href=/tags/RHACM><i class="fas fa-tags"></i> RHACM</a></li><li><a href=/tags/RHACS><i class="fas fa-tags"></i> RHACS</a></li><li><a href=/tags/RHEL><i class="fas fa-tags"></i> RHEL</a></li><li><a href=/tags/ansible><i class="fas fa-tags"></i> ansible</a></li><li><a href=/tags/automation><i class="fas fa-tags"></i> automation</a></li><li><a href=/tags/azure><i class="fas fa-tags"></i> azure</a></li><li><a href=/tags/debugging><i class="fas fa-tags"></i> debugging</a></li><li><a href=/tags/docker><i class="fas fa-tags"></i> docker</a></li><li><a href=/tags/draft><i class="fas fa-tags"></i> draft</a></li><li><a href=/tags/etcd><i class="fas fa-tags"></i> etcd</a></li><li><a href=/tags/git><i class="fas fa-tags"></i> git</a></li><li><a href=/tags/haproxy><i class="fas fa-tags"></i> haproxy</a></li><li><a href=/tags/heat><i class="fas fa-tags"></i> heat</a></li><li><a href=/tags/hybrid-cloud><i class="fas fa-tags"></i> hybrid-cloud</a></li><li><a href=/tags/install><i class="fas fa-tags"></i> install</a></li><li><a href=/tags/kubeconfig><i class="fas fa-tags"></i> kubeconfig</a></li><li><a href=/tags/kubernetes><i class="fas fa-tags"></i> kubernetes</a></li><li><a href=/tags/mac><i class="fas fa-tags"></i> mac</a></li><li><a href=/tags/metrics><i class="fas fa-tags"></i> metrics</a></li><li><a href=/tags/migration><i class="fas fa-tags"></i> migration</a></li><li><a href=/tags/monitoring><i class="fas fa-tags"></i> monitoring</a></li><li><a href=/tags/networking><i class="fas fa-tags"></i> networking</a></li><li><a href=/tags/openshift><i class="fas fa-tags"></i> openshift</a></li><li><a href=/tags/openstack><i class="fas fa-tags"></i> openstack</a></li><li><a href=/tags/operators><i class="fas fa-tags"></i> operators</a></li><li><a href=/tags/prometheus><i class="fas fa-tags"></i> prometheus</a></li><li><a href=/tags/python><i class="fas fa-tags"></i> python</a></li><li><a href=/tags/router><i class="fas fa-tags"></i> router</a></li><li><a href=/tags/security><i class="fas fa-tags"></i> security</a></li><li><a href=/tags/ssl><i class="fas fa-tags"></i> ssl</a></li><li><a href=/tags/stackrox><i class="fas fa-tags"></i> stackrox</a></li><li><a href=/tags/storage><i class="fas fa-tags"></i> storage</a></li><li><a href=/tags/troubleshooting><i class="fas fa-tags"></i> troubleshooting</a></li><li><a href=/tags/upgrade><i class="fas fa-tags"></i> upgrade</a></li><li><a href=/tags/vagrant><i class="fas fa-tags"></i> vagrant</a></li><li><a href=/tags/virtualization><i class="fas fa-tags"></i> virtualization</a></li><li><a href=/tags/webinar><i class="fas fa-tags"></i> webinar</a></li><li><a href=/tags/windows><i class="fas fa-tags"></i> windows</a></li><li><a href=/tags/zabbix><i class="fas fa-tags"></i> zabbix</a></li><li><a href=/tags/zimbra><i class="fas fa-tags"></i> zimbra</a></li></ul></div></div></div></div></div></div><footer id=footer><div class=container><div class="col-md-4 col-sm-6"><h4>Share</h4><i class="fab fa-2x fa-twitter" title="Share this on Twitter" onclick='window.open("http://twitter.com/home?status=http://guifreelife.com/blog/2021/03/09/Understanding-OpenShift-Over-The-Air-Updates/")'></i>
<i class="fab fa-2x fa-facebook" title="Share this on Facebook" onclick='window.open("http://www.facebook.com/share.php?u=http://guifreelife.com/blog/2021/03/09/Understanding-OpenShift-Over-The-Air-Updates/")'></i>
<i class="fab fa-2x fa-linkedin" title="Share this on Linkedin" onclick='window.open("https://www.linkedin.com/shareArticle?mini=true&url=http://guifreelife.com/blog/2021/03/09/Understanding-OpenShift-Over-The-Air-Updates/&title=&summary=&source=")'></i>
<i class="fab fa-2x fa-google-plus" title="Share this on Google Currents" onclick='window.open("https://plus.google.com/share?url=http://guifreelife.com/blog/2021/03/09/Understanding-OpenShift-Over-The-Air-Updates/")'></i>
<i class="fa fa-2x fa-envelope" title="Share this through Email" onclick='window.open("mailto:?&body=http://guifreelife.com/blog/2021/03/09/Understanding-OpenShift-Over-The-Air-Updates/")'></i><h4>About us</h4><p>GUI Free Life is the personal, technical blog of Dale Bewley. Comments and opinions are my own and not that of my employers.</p><hr class="hidden-md hidden-lg hidden-sm"></div><div class="col-md-4 col-sm-6"><h4>Recent posts</h4><div class=blog-entries><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=http://guifreelife.com/blog/2025/05/29/Managing-OpenShift-Machine-Configuration-with-Butane-and-Ignition/><img src=/images/machineconfigs-butane.png class=img-responsive alt="Managing Readable OpenShift MachineConfigs with Butane"></a></div><div class="name same-height-always"><h5><a href=http://guifreelife.com/blog/2025/05/29/Managing-OpenShift-Machine-Configuration-with-Butane-and-Ignition/>Managing Readable OpenShift MachineConfigs with Butane</a></h5></div></div><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=http://guifreelife.com/blog/2025/04/09/Kubeconfig-for-OpenShift-Service-Accounts/><img src=/images/kubeconfig.jpeg class=img-responsive alt="Generate a Kubeconfig to Enable OpenShift Service Account Authentication"></a></div><div class="name same-height-always"><h5><a href=http://guifreelife.com/blog/2025/04/09/Kubeconfig-for-OpenShift-Service-Accounts/>Generate a Kubeconfig to Enable OpenShift Service Account Authentication</a></h5></div></div><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=http://guifreelife.com/blog/2025/01/02/OpenShift-Virtualization-VLAN-Guest-Tagging/><img src=/images/vgt-trunk.jpeg class=img-responsive alt="OpenShift Virtual Guest Tagging"></a></div><div class="name same-height-always"><h5><a href=http://guifreelife.com/blog/2025/01/02/OpenShift-Virtualization-VLAN-Guest-Tagging/>OpenShift Virtual Guest Tagging</a></h5></div></div></div><hr class="hidden-md hidden-lg"></div><div class="col-md-4 col-sm-6"><h4>Contact</h4><p class=text-uppercase><strong>Dale Bewley</strong><br>Oakland<br>California<br><strong>USA</strong></p><a href=/contact class="btn btn-small btn-template-main">Go to contact page</a><hr class="hidden-md hidden-lg hidden-sm"></div></div></footer><div id=copyright><div class=container><div class=col-md-12><p class=pull-left>Copyright (c) 2021, Dale Bewley; all rights reserved.</p><p class=pull-right>Template by <a href=https://bootstrapious.com/p/universal-business-e-commerce-template>Bootstrapious</a>.
Ported to Hugo by <a href=https://github.com/devcows/hugo-universal-theme>DevCows</a>.</p></div></div></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-39TSW9349X"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-39TSW9349X",{anonymize_ip:!1})}</script><script src=//code.jquery.com/jquery-3.1.1.min.js integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin=anonymous></script>
<script src=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js></script>
<script src="//maps.googleapis.com/maps/api/js?key=AIzaSyDacpwSIXi6lk2fS2wzZOSoh7iHm_ZP3UE&v=3.exp"></script>
<script src=/js/hpneo.gmaps.js></script>
<script src=/js/gmaps.init.js></script>
<script src=/js/front.js></script>
<script src=/js/owl.carousel.min.js></script></body></html>