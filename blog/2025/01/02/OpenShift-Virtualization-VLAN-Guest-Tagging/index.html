<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta name=viewport content="width=device-width,initial-scale=1"><title>OpenShift Virtual Guest Tagging | GUI Free Life</title><meta name=author content="Dale Bewley"><meta name=keywords content="bewley,guifreelife,networking,openshift,kubernetes,virtualization"><meta name=description content="Some workloads require the use of VLAN tagged interfaces in virtual machines. VMware terms this feature VGT. OpenShift Virtualization supports this feature using traditional Linux Bridge interfaces. This post details and demonstrates an implementation."><meta name=generator content="Hugo 0.147.8"><link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel=stylesheet type=text/css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.11.2/css/all.css><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link href=/css/animate.css rel=stylesheet><link href=/css/style.turquoise.css rel=stylesheet id=theme-stylesheet><link href=/css/custom.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link href=/css/owl.carousel.css rel=stylesheet><link href=/css/owl.theme.css rel=stylesheet><link rel=alternate href=http://guifreelife.com/index.xml type=application/rss+xml title="GUI Free Life"><meta property="og:locale" content="en_us"><meta property="og:site_name" content="GUI Free Life"><meta property="og:title" content="OpenShift Virtual Guest Tagging"><meta property="og:type" content="article"><meta property="og:url" content="http://guifreelife.com/blog/2025/01/02/OpenShift-Virtualization-VLAN-Guest-Tagging/"><meta property="og:description" content="Some workloads require the use of VLAN tagged interfaces in virtual machines. VMware terms this feature VGT. OpenShift Virtualization supports this feature using traditional Linux Bridge interfaces. This post details and demonstrates an implementation."><meta property="og:image" content="http://guifreelife.com/images/vgt-trunk.jpeg"><meta property="og:image:type" content="image/jpeg"><meta property="og:image:width" content="4032"><meta property="og:image:height" content="2268"><meta property="og:updated_time" content="2025-01-02T00:00:00Z"><meta property="article:tag" content="networking"><meta property="article:tag" content="openshift"><meta property="article:tag" content="kubernetes"><meta property="article:tag" content="virtualization"><meta property="article:published_time" content="2025-01-02T00:00:00Z"><meta property="article:modified_time" content="2025-01-02T00:00:00Z"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="OpenShift Virtual Guest Tagging"><meta name=twitter:image content="http://guifreelife.com/images/vgt-trunk.jpeg"><meta name=twitter:description content="Some workloads require the use of VLAN tagged interfaces in virtual machines. VMware terms this feature VGT. OpenShift Virtualization supports this feature using traditional Linux Bridge interfaces. …"><link rel=stylesheet type=text/css href=/css/asciinema-player.css><script src=/js/asciinema-player.js></script></head><body><div id=all><header class=navbar-affixed-top data-spy=affix data-offset-top=62><div class="navbar navbar-default yamm" role=navigation id=navbar><div class=container><div class=navbar-header><a class="navbar-brand home" href=/><img src=/img/logo.png alt="OpenShift Virtual Guest Tagging logo" class="hidden-xs hidden-sm">
<img src=/img/logo-small.png alt="OpenShift Virtual Guest Tagging logo" class="visible-xs visible-sm">
<span class=sr-only>OpenShift Virtual Guest Tagging - go to homepage</span></a><div class=navbar-buttons><button type=button class="navbar-toggle btn-template-main" data-toggle=collapse data-target=#navigation>
<span class=sr-only>Toggle Navigation</span>
<i class="fas fa-align-justify"></i></button></div></div><div class="navbar-collapse collapse" id=navigation><ul class="nav navbar-nav navbar-right"><li class=dropdown><a href=/>Home</a></li><li class="dropdown active"><a href=/blog/>Blog</a></li><li class=dropdown><a href=/contact/>Contact</a></li></ul></div><div class="collapse clearfix" id=search><form class=navbar-form role=search><div class=input-group><input type=text class=form-control placeholder=Search>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div></div></header><style>.bar.background-image-fixed-banner{background:url(/images/vgt-trunk.jpeg)50% 0 no-repeat;background-attachment:fixed;background-size:cover;padding:100px 5%;text-shadow:2px 3px 4px var(--primary-accent),0 0 1em var(--navbar-border-top)}</style><div><div class=container><div class=row><div class=col-md-12><section class="bar background-image-fixed-banner heading h2 color-white text-center"><h1>OpenShift Virtual Guest Tagging</h1></section></div></div></div></div><div id=content><div class=container><div class=row><div class=col-md-9 id=blog-post><p class="text-muted text-uppercase mb-small text-right">January 2, 2025</p><div id=post-content><p>Some workloads require the use of VLAN interfaces in virtual machines. VMware terms this feature &ldquo;Virtual Guest Tagging&rdquo; or &ldquo;VLAN Guest Tagging&rdquo; while OpenStack calls it &ldquo;VLAN-aware instances&rdquo;. See how OpenShift Virtualization can pass 802.1q trunks to VMs using a traditional Linux Bridge interface.</p><h1 id=bridges-and-vlans>Bridges and VLANs</h1><figure class=pull-right><img src=/images/openshift-virt-switch-tags.gif alt="Animation of VLAN tagged frames traversing a switch"><figcaption><h4>Frames exiting access ports are normally untagged</h4></figcaption></figure><p>Traditionally a bridge simply existed to relay <a href=https://en.wikipedia.org/wiki/Data_link_layer>data link layer</a> ethernet <a href=https://en.wikipedia.org/wiki/Ethernet>frames</a> (<em>just think packets</em>) from one physical segment to another. A switch is an evolved bridge which can apply more intelligence when deciding which interface to send a frame.</p><p>Each frame has a source and destination MAC address. Switches collect the MAC address from frames and understand which port a MAC address was learned on, this enables more efficient decisions when directing frames to ports. Additionally switches can be segmented into multiple broadcast domains though the use of VLANs by tagging frames with a unique ID.</p><p>The uplink feeding data to a switch may be an 802.1q trunk which will include a VLAN ID tag on each frame. The tags remain on the frame until it is passed out a port which is configured as an &ldquo;access port&rdquo; associated with a specific VLAN. If a tag comes into the switch via that access port, the tag assocated with that port is added back to the frame by the switch.</p><p>That&rsquo;s normally exactly what you want, but let&rsquo;s dive into a solution to treate the port as a trunk and keep tags attached and visible inside of the VM operating system.</p><p>First a little background on OpenShift Networking.</p><h1 id=ovs-bridge-and-linux-bridge>OVS Bridge and Linux Bridge</h1><p>OpenShift uses the <a href=https://ovn-kubernetes.io/ title=OVN-Kubernetes>OVN-Kubernetes</a> CNI which includes support for a <code>localnet</code> topology layered upon an OVS Bridge. See this <a href=http://guifreelife.com/blog/2024/11/19/Open-Virtual-Network-Inspection-on-OpenShift/ title="Open Virtual Network Inspection on OpenShift">previous post</a> on OVN. While OVN is the most featureful and recommended interface, it does <a href=https://issues.redhat.com/browse/RFE-6831 title="RFE Support Trunking on OVN-K8s Localnet">not yet support</a> VLAN tags through a localnet attachment.</p><p>Fortunately this can be accomplished using a Linux Bridge interface. Despite the name, a Linux Bridge has intelligence for handling frame construction and the ports attached to it like a switch.</p><figure><img src=/images/openshift-virt-vgt-node.png alt="OpenShift Node networking"><figcaption><h4>OpenShift Node with 3 bridges</h4></figcaption></figure><p>Above is a diagram of a node having 3 bridges. Bridge <code>br-ex</code> is the default management interface, the second <code>br-vmdata</code> was created to attach VMs to provider networks as <code>localnet</code> secondary networks. Both of these bridges are OVS Bridges. The third bridge <code>br-trunk</code> is a <a href=https://developers.redhat.com/articles/2022/04/06/introduction-linux-bridging-commands-and-features title="Linux Bridge">Linux Bridge</a> and was created only for the use case we are discussing here.</p><h2 id=creating-the-linux-bridge>Creating the Linux Bridge</h2><p>It&rsquo;s important to note that a host NIC can not be assigned to both an OVS Bridge and a Linux Bridge at the same time, so a dedicated host NIC will be required.</p><p>Here we create a Linux bridge called <code>br-trunk</code> on a dedicated NIC called <code>ens256</code>.</p><blockquote><p>📓 <strong><code>NodeNetworkConfigurationPolicy</code> to create Linux Bridge <code>br-trunk</code></strong>
If ens256 is not in every host you&rsquo;ll need to add add a NodeSelector.
<a href=https://github.com/dlbewley/demo-virt/blob/main/demos/vgt/components/br-trunk/linux-bridge/nncp.yaml>ref</a></p></blockquote><ul><li><span class=expand><span class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(200,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>br-trunk nncp.yaml
<i class="fas fa-chevron-down"></i></span><div class=expand-content style="display:block;margin:10px 0"><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#008b45;text-decoration:underline>---</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>nmstate.io/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>kind</span>:<span style=color:#bbb> </span>NodeNetworkConfigurationPolicy<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>br-trunk<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>desiredState</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>interfaces</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#bbb>      </span>- <span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>ens256<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>ipv4</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#bbb>          </span><span style=color:#8b008b;font-weight:700>enabled</span>:<span style=color:#bbb> </span><span style=color:#8b008b;font-weight:700>false</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>ipv6</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#bbb>          </span><span style=color:#8b008b;font-weight:700>enabled</span>:<span style=color:#bbb> </span><span style=color:#8b008b;font-weight:700>false</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>state</span>:<span style=color:#bbb> </span>up<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>type</span>:<span style=color:#bbb> </span>ethernet<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex;background-color:#d6d6c6><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#bbb>      </span>- <span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>br-trunk<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>description</span>:<span style=color:#bbb> </span>|-<span style=color:#cd5555>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#cd5555>          Linux Bridge with ens256 as a port
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#cd5555>          allowing all VLANs and untagged traffic.</span><span style=color:#bbb>
</span></span></span><span style=display:flex;background-color:#d6d6c6><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>type</span>:<span style=color:#bbb> </span>linux-bridge<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>state</span>:<span style=color:#bbb> </span>up<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>bridge</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#bbb>          </span><span style=color:#8b008b;font-weight:700>options</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#bbb>            </span><span style=color:#8b008b;font-weight:700>stp</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span><span style=color:#bbb>              </span><span style=color:#8b008b;font-weight:700>enabled</span>:<span style=color:#bbb> </span><span style=color:#8b008b;font-weight:700>false</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span><span style=color:#bbb>          </span><span style=color:#8b008b;font-weight:700>port</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span><span style=color:#bbb>            </span>- <span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>ens256<span style=color:#bbb>
</span></span></span><span style=display:flex;background-color:#d6d6c6><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span><span style=color:#bbb>              </span><span style=color:#8b008b;font-weight:700>vlan</span>:<span style=color:#bbb> </span>{}<span style=color:#bbb>
</span></span></span></code></pre></div></div></span></li></ul><p>Next create a network attachment definition called <code>trunk</code> in the demo-vgt namespace. It will be a cnv-bridge type and reference the <code>br-trunk</code> interface just created above.</p><blockquote><p>📓 <strong><code>NetworkAttachmentDefinition</code> to form a an 802.1q trunk from a Linux Bridge to VM</strong>
<a href=https://github.com/dlbewley/demo-virt/blob/main/demos/vgt/components/trunk/linux-bridge/nad.yaml>ref</a></p></blockquote><ul><li><span class=expand><span class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(200,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>trunk nad.yaml
<i class="fas fa-chevron-down"></i></span><div class=expand-content style="display:block;margin:10px 0"><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#008b45;text-decoration:underline>---</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>k8s.cni.cncf.io/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>kind</span>:<span style=color:#bbb> </span>NetworkAttachmentDefinition<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>annotations</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>description</span>:<span style=color:#bbb> </span><span style=color:#b452cd>802.</span>1q Trunk Connection<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>trunk<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>namespace</span>:<span style=color:#bbb> </span>demo-vgt<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bbb>  </span><span style=color:#228b22># omitting vlanId on Linux Bridge results in all VLANs passed</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#bbb>  </span><span style=color:#228b22># omitting vlan on OVS Bridge results in only VLAN 0 (native) passing</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>config</span>:<span style=color:#bbb> </span>|-<span style=color:#cd5555>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#cd5555>    {
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#cd5555>      &#34;cniVersion&#34;: &#34;0.4.0&#34;,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#cd5555>      &#34;name&#34;: &#34;trunk&#34;,
</span></span></span><span style=display:flex;background-color:#d6d6c6><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#cd5555>      &#34;type&#34;: &#34;cnv-bridge&#34;,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#cd5555>      &#34;macspoof&#34;: false,
</span></span></span><span style=display:flex;background-color:#d6d6c6><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#cd5555>      &#34;bridge&#34;: &#34;br-trunk&#34;,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#cd5555>      &#34;netAttachDefName&#34;: &#34;demo-vgt/trunk&#34;,
</span></span></span><span style=display:flex;background-color:#d6d6c6><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#cd5555>      &#34;vlanId&#34;: {},
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#cd5555>      &#34;ipam&#34;: {}
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#cd5555>    }</span><span style=color:#bbb>
</span></span></span></code></pre></div></div></span></li></ul><p>⭐ <strong>Important Update 2025-08</strong> <em>Changes for OpenShift 4.19</em></p><p><em>As of OpenShift 4.19 IP forwarding is disabled on each NIC by default.
You must enable IP forwarding for the NIC tied to the Linux bridge.</em></p><blockquote><p>📓 <strong><code>Tuned</code> profile to enable IP forwarding on physical NIC</strong>
<a href=https://github.com/dlbewley/demo-virt/blob/main/demos/vgt/components/br-trunk/linux-bridge/tuned.yaml>ref</a></p></blockquote><ul><li><span class=expand><span class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(200,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>tuned.yaml
<i class="fas fa-chevron-down"></i></span><div class=expand-content style="display:block;margin:10px 0"><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#008b45;text-decoration:underline>---</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>tuned.openshift.io/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>kind</span>:<span style=color:#bbb> </span>Tuned<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>ip-forward-linux-bridge<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>namespace</span>:<span style=color:#bbb> </span>openshift-cluster-node-tuning-operator<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>profile</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#bbb>    </span>- <span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>ip-forward-linux-bridge<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bbb>      </span><span style=color:#8b008b;font-weight:700>data</span>:<span style=color:#bbb> </span>|<span style=color:#cd5555>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#cd5555>        [main]
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#cd5555>        summary=Add IP forwarding to interface hosting linux bridge
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#cd5555>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#cd5555>        [sysctl]
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#cd5555>        # update NIC name as appropriate
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#cd5555>        net.ipv4.conf.ens256.forwarding=1</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>recommend</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#bbb>    </span>- <span style=color:#8b008b;font-weight:700>profile</span>:<span style=color:#bbb> </span>ip-forward-linux-bridge<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#bbb>      </span><span style=color:#8b008b;font-weight:700>priority</span>:<span style=color:#bbb> </span><span style=color:#b452cd>10</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#bbb>      </span><span style=color:#8b008b;font-weight:700>match</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#bbb>        </span><span style=color:#228b22># adjust selector in the overlay kustomization.yaml</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#bbb>        </span>- <span style=color:#8b008b;font-weight:700>label</span>:<span style=color:#bbb> </span>node-role.kubernetes.io/worker<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#bbb>          </span><span style=color:#8b008b;font-weight:700>value</span>:<span style=color:#bbb> </span><span style=color:#cd5555>&#39;&#39;</span><span style=color:#bbb>
</span></span></span></code></pre></div></div></span></li></ul><h1 id=demos>Demos</h1><h2 id=host-to-guest-vlan-tagging>Host to Guest VLAN Tagging</h2><p>In this demo, the provider (meaning existing outside the OpenShift cluster) VLAN 1924 is among several VLAN tags trunked to <code>ens256</code> on the OpenShift Node. You will see a VLAN interface created in the VM called <code>eth1.1924</code> which is directly attached to this physical VLAN.</p><p><strong>Demo (<a href=https://github.com/dlbewley/demo-virt/tree/main/demos/vgt title="Demo Source">source</a>): 802.1q trunk to a VM using linux-bridge on the host and cnv-bridge type NetworkAttachmentDefinition</strong></p><blockquote><span class=expand><span class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(200,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>📺 ASCII Screencast
<i class="fas fa-chevron-down"></i></span><div class=expand-content style="display:block;margin:10px 0"><p>Setup bridge & network attachment, create VMs, test networking, and cleanup.</p><p><asciinema-player src=/casts/vgt-linux-br-20241222.cast cols=640 rows=40 start-at=0 speed=1 poster=npt:0:35 font-size=smaller></asciinema-player></p></div></span></blockquote><h2 id=guest-to-guest-vlan-tagging>Guest to Guest VLAN Tagging</h2><p>When the VM NIC is attached via Linux Bridge it also becomes possible to make up arbitrary VLAN tags to trunk between virtual machines. In otherwords you can make up your own VLAN tags and trunk them peer-to-peer between VMs.</p><p>This demo shows made up VLANs 222 and 333 being created from thin air and passed between 2 VMs via the same <code>trunk</code> attachment to the <code>br-trunk</code> Linux Bridge used above.</p><p><strong>Demo (<a href=https://github.com/dlbewley/demo-virt/tree/main/demos/vgt title="Demo Source">source</a>): 802.1q trunk between VMs using linux-bridge on the host and cnv-bridge type NetworkAttachmentDefinition</strong></p><ul><li><span class=expand><span class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(200,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>VM network-setup.sh
<i class="fas fa-chevron-right"></i></span><div class=expand-content style="display:none;margin:10px 0"><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#228b22># create eth1.222 and eth1.333 VLAN interfaces</span>
</span></span><span style=display:flex><span><span style=color:#228b22># use .1 IP on first VM and .2 IP on second VM to enable ICMP test</span>
</span></span><span style=display:flex><span><span style=color:#00688b>NIC</span>=eth1
</span></span><span style=display:flex><span><span style=color:#00688b>VLAN</span>=<span style=color:#b452cd>222</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nmcli -f connection.id con show <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span> 2&gt;&amp;<span style=color:#b452cd>1</span> &gt; /dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>if</span> [ <span style=color:#00688b>$?</span> -ne <span style=color:#b452cd>0</span> ]; <span style=color:#8b008b;font-weight:700>then</span>
</span></span><span style=display:flex><span>  nmcli connection add <span style=color:#658b00>type</span> vlan <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>    con-name <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>    ifname <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>    vlan.parent <span style=color:#00688b>$NIC</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>    vlan.id <span style=color:#00688b>$VLAN</span>
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nmcli connection modify <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>  ipv4.route-metric <span style=color:#b452cd>222</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>  ipv4.method static <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>  ipv4.address 10.2.2.1/24
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nmcli connection up <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00688b>VLAN</span>=<span style=color:#b452cd>333</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nmcli -f connection.id con show <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span> 2&gt;&amp;<span style=color:#b452cd>1</span> &gt; /dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>if</span> [ <span style=color:#00688b>$?</span> -ne <span style=color:#b452cd>0</span> ]; <span style=color:#8b008b;font-weight:700>then</span>
</span></span><span style=display:flex><span>  nmcli connection add <span style=color:#658b00>type</span> vlan <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>    con-name <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>    ifname <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>    vlan.parent <span style=color:#00688b>$NIC</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>    vlan.id <span style=color:#00688b>$VLAN</span>
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nmcli connection modify <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>  ipv4.route-metric <span style=color:#b452cd>333</span> <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>  ipv4.method static <span style=color:#cd5555>\
</span></span></span><span style=display:flex><span><span style=color:#cd5555></span>  ipv4.address 10.3.3.1/24
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nmcli connection up <span style=color:#00688b>$NIC</span>.<span style=color:#00688b>$VLAN</span>
</span></span></code></pre></div></div></span></li></ul><blockquote><span class=expand><span class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(200,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>📺 ASCII Screencast
<i class="fas fa-chevron-down"></i></span><div class=expand-content style="display:block;margin:10px 0"><p>Demonstrate peer to peer VLAN trunking</p><p><asciinema-player src=/casts/vgt-linux-br-p2p-20250102.cast cols=640 rows=40 start-at=0 speed=1 poster=npt:0:35 font-size=smaller></asciinema-player></p></div></span></blockquote><h1 id=summary>Summary</h1><p>OVS Bridging + <code>localnet</code> topology is the recommended way to attach a OpenShift Virtualization VM guest to a provider VLAN. However, when there is a need to pass VLAN tags all the way through to the VM guest your options become special SR-IOV hardware and possibly <a href=https://docs.openshift.com/container-platform/4.17/networking/hardware_networks/configuring-sriov-qinq-support.html title=QinQ>QinQ</a> or a software Linux Bridge. You just saw how to implement the Linux Bridge solution.</p><p>Stand by for OpenShift&rsquo;s User Defined Networks feature which is just around the corner. UDN will bring greater flexibility, simplicity, tenancy, and enhanced support for &ldquo;bringing your own netork&rdquo;. However, VLAN tags will not be supported out of the gate.</p><p>More on UDN in a future post.</p><h1 id=references>References</h1><ul><li><a href=https://github.com/dlbewley/demo-virt/tree/main/demos/vgt title="Demo Source">Demo Source</a></li><li><a href=https://github.com/containernetworking/cni/blob/spec-v0.4.0/SPEC.md title="CNI v0.4.0 Specification">Container Network Interface Specification</a></li><li><a href=https://github.com/ovn-org/ovn-kubernetes title="OVN-Kubernetes CNI Plugin">OVN-Kubernetes CNI Plugin</a> - github.com</li><li><a href=https://ovn-kubernetes.io/ title=OVN-Kubernetes>OVN-Kubernetes</a></li><li><a href=https://issues.redhat.com/browse/RFE-6831 title="RFE Support Trunking on OVN-K8s Localnet">RFE Support Trunking on OVN-K8s Localnet</a></li><li><a href=https://developers.redhat.com/articles/2022/04/06/introduction-linux-bridging-commands-and-features title="Linux Bridge">Linux Bridge</a></li><li><a href=http://guifreelife.com/blog/2024/11/19/Open-Virtual-Network-Inspection-on-OpenShift/ title="Open Virtual Network Inspection on OpenShift">GUI Free Life OVN Inspection</a> post</li><li><a href=https://docs.redhat.com/en/documentation/red_hat_openstack_services_on_openshift/18.0/html/managing_networking_resources/vlan-aware-instances_rhoso-mngnet#vlan-aware-instances_rhoso-mngnet title="OpenStack VLAN Aware Instances">OpenStack VLAN Aware Instances</a></li></ul></div></div><div class=col-md-3><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Search</h3></div><div class=panel-body><form action=//google.com/search method=get accept-charset=UTF-8 role=search><div class=input-group><input type=search name=q class=form-control placeholder=Search>
<input type=hidden name=sitesearch value=http://guifreelife.com/>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tagged</h3></div><div class=panel-body><ul class=tag-cloud><li class=active><a href=/tags/networking><i class="fas fa-tags"></i> networking</a></li><li class=active><a href=/tags/openshift><i class="fas fa-tags"></i> openshift</a></li><li class=active><a href=/tags/kubernetes><i class="fas fa-tags"></i> kubernetes</a></li><li class=active><a href=/tags/virtualization><i class="fas fa-tags"></i> virtualization</a></li></ul></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>TOC</h3></div><div class=panel-body><nav id=TableOfContents><ul><li><a href=#bridges-and-vlans>Bridges and VLANs</a></li><li><a href=#ovs-bridge-and-linux-bridge>OVS Bridge and Linux Bridge</a><ul><li><a href=#creating-the-linux-bridge>Creating the Linux Bridge</a></li></ul></li><li><a href=#demos>Demos</a><ul><li><a href=#host-to-guest-vlan-tagging>Host to Guest VLAN Tagging</a></li><li><a href=#guest-to-guest-vlan-tagging>Guest to Guest VLAN Tagging</a></li></ul></li><li><a href=#summary>Summary</a></li><li><a href=#references>References</a></li></ul></nav></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tags</h3></div><div class=panel-body><ul class=tag-cloud><li><a href=/tags/ansible><i class="fas fa-tags"></i> ansible</a></li><li><a href=/tags/automation><i class="fas fa-tags"></i> automation</a></li><li><a href=/tags/aws><i class="fas fa-tags"></i> aws</a></li><li><a href=/tags/azure><i class="fas fa-tags"></i> azure</a></li><li><a href=/tags/cdk><i class="fas fa-tags"></i> cdk</a></li><li><a href=/tags/coreos><i class="fas fa-tags"></i> coreos</a></li><li><a href=/tags/debugging><i class="fas fa-tags"></i> debugging</a></li><li><a href=/tags/docker><i class="fas fa-tags"></i> docker</a></li><li><a href=/tags/draft><i class="fas fa-tags"></i> draft</a></li><li><a href=/tags/etcd><i class="fas fa-tags"></i> etcd</a></li><li><a href=/tags/git><i class="fas fa-tags"></i> git</a></li><li><a href=/tags/haproxy><i class="fas fa-tags"></i> haproxy</a></li><li><a href=/tags/heat><i class="fas fa-tags"></i> heat</a></li><li><a href=/tags/hybrid-cloud><i class="fas fa-tags"></i> hybrid-cloud</a></li><li><a href=/tags/install><i class="fas fa-tags"></i> install</a></li><li><a href=/tags/kubeconfig><i class="fas fa-tags"></i> kubeconfig</a></li><li><a href=/tags/kubernetes><i class="fas fa-tags"></i> kubernetes</a></li><li><a href=/tags/mac><i class="fas fa-tags"></i> mac</a></li><li><a href=/tags/metrics><i class="fas fa-tags"></i> metrics</a></li><li><a href=/tags/migration><i class="fas fa-tags"></i> migration</a></li><li><a href=/tags/monitoring><i class="fas fa-tags"></i> monitoring</a></li><li><a href=/tags/networking><i class="fas fa-tags"></i> networking</a></li><li><a href=/tags/ocp3><i class="fas fa-tags"></i> ocp3</a></li><li><a href=/tags/ocp4><i class="fas fa-tags"></i> ocp4</a></li><li><a href=/tags/openshift><i class="fas fa-tags"></i> openshift</a></li><li><a href=/tags/openstack><i class="fas fa-tags"></i> openstack</a></li><li><a href=/tags/operators><i class="fas fa-tags"></i> operators</a></li><li><a href=/tags/prometheus><i class="fas fa-tags"></i> prometheus</a></li><li><a href=/tags/python><i class="fas fa-tags"></i> python</a></li><li><a href=/tags/rhacm><i class="fas fa-tags"></i> rhacm</a></li><li><a href=/tags/rhacs><i class="fas fa-tags"></i> rhacs</a></li><li><a href=/tags/rhel><i class="fas fa-tags"></i> rhel</a></li><li><a href=/tags/router><i class="fas fa-tags"></i> router</a></li><li><a href=/tags/security><i class="fas fa-tags"></i> security</a></li><li><a href=/tags/ssl><i class="fas fa-tags"></i> ssl</a></li><li><a href=/tags/stackrox><i class="fas fa-tags"></i> stackrox</a></li><li><a href=/tags/storage><i class="fas fa-tags"></i> storage</a></li><li><a href=/tags/troubleshooting><i class="fas fa-tags"></i> troubleshooting</a></li><li><a href=/tags/upgrade><i class="fas fa-tags"></i> upgrade</a></li><li><a href=/tags/vagrant><i class="fas fa-tags"></i> vagrant</a></li><li><a href=/tags/virtualization><i class="fas fa-tags"></i> virtualization</a></li><li><a href=/tags/webinar><i class="fas fa-tags"></i> webinar</a></li><li><a href=/tags/windows><i class="fas fa-tags"></i> windows</a></li><li><a href=/tags/zabbix><i class="fas fa-tags"></i> zabbix</a></li><li><a href=/tags/zimbra><i class="fas fa-tags"></i> zimbra</a></li></ul></div></div></div></div></div></div><footer id=footer><div class=container><div class="col-md-4 col-sm-6"><h4>Share</h4><i class="fab fa-2x fa-twitter" title="Share this on Twitter" onclick='window.open("http://twitter.com/home?status=http://guifreelife.com/blog/2025/01/02/OpenShift-Virtualization-VLAN-Guest-Tagging/")'></i>
<i class="fab fa-2x fa-facebook" title="Share this on Facebook" onclick='window.open("http://www.facebook.com/share.php?u=http://guifreelife.com/blog/2025/01/02/OpenShift-Virtualization-VLAN-Guest-Tagging/")'></i>
<i class="fab fa-2x fa-linkedin" title="Share this on Linkedin" onclick='window.open("https://www.linkedin.com/shareArticle?mini=true&url=http://guifreelife.com/blog/2025/01/02/OpenShift-Virtualization-VLAN-Guest-Tagging/&title=&summary=&source=")'></i>
<i class="fab fa-2x fa-google-plus" title="Share this on Google Currents" onclick='window.open("https://plus.google.com/share?url=http://guifreelife.com/blog/2025/01/02/OpenShift-Virtualization-VLAN-Guest-Tagging/")'></i>
<i class="fa fa-2x fa-envelope" title="Share this through Email" onclick='window.open("mailto:?&body=http://guifreelife.com/blog/2025/01/02/OpenShift-Virtualization-VLAN-Guest-Tagging/")'></i><h4>About us</h4><p>GUI Free Life is the personal, technical blog of Dale Bewley. Comments and opinions are my own and not that of my employers.</p><hr class="hidden-md hidden-lg hidden-sm"></div><div class="col-md-4 col-sm-6"><h4>Recent posts</h4><div class=blog-entries><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=http://guifreelife.com/blog/2025/06/20/CoreOS-Image-Layering-Autofs/><img src=/images/layering-cake-trans.png class=img-responsive alt="OpenShift CoreOS On-Cluster Custom Node Image Layering"></a></div><div class="name same-height-always"><h5><a href=http://guifreelife.com/blog/2025/06/20/CoreOS-Image-Layering-Autofs/>OpenShift CoreOS On-Cluster Custom Node Image Layering</a></h5></div></div><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=http://guifreelife.com/blog/2025/05/29/Managing-OpenShift-Machine-Configuration-with-Butane-and-Ignition/><img src=/images/machineconfigs-butane.png class=img-responsive alt="Managing Readable OpenShift MachineConfigs with Butane"></a></div><div class="name same-height-always"><h5><a href=http://guifreelife.com/blog/2025/05/29/Managing-OpenShift-Machine-Configuration-with-Butane-and-Ignition/>Managing Readable OpenShift MachineConfigs with Butane</a></h5></div></div><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=http://guifreelife.com/blog/2025/04/09/Kubeconfig-for-OpenShift-Service-Accounts/><img src=/images/kubeconfig.jpeg class=img-responsive alt="Generate a Kubeconfig to Enable OpenShift Service Account Authentication"></a></div><div class="name same-height-always"><h5><a href=http://guifreelife.com/blog/2025/04/09/Kubeconfig-for-OpenShift-Service-Accounts/>Generate a Kubeconfig to Enable OpenShift Service Account Authentication</a></h5></div></div></div><hr class="hidden-md hidden-lg"></div><div class="col-md-4 col-sm-6"><h4>Contact</h4><p class=text-uppercase><strong>Dale Bewley</strong><br>Oakland<br>California<br><strong>USA</strong></p><a href=/contact class="btn btn-small btn-template-main">Go to contact page</a><hr class="hidden-md hidden-lg hidden-sm"></div></div></footer><div id=copyright><div class=container><div class=col-md-12><p class=pull-left>Copyright (c) 2021, Dale Bewley; all rights reserved.</p><p class=pull-right>Template by <a href=https://bootstrapious.com/p/universal-business-e-commerce-template>Bootstrapious</a>.
Ported to Hugo by <a href=https://github.com/devcows/hugo-universal-theme>DevCows</a>.</p></div></div></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-39TSW9349X"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-39TSW9349X")}</script><script src=//code.jquery.com/jquery-3.1.1.min.js integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin=anonymous></script><script src=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js></script><script src="//maps.googleapis.com/maps/api/js?key=AIzaSyDacpwSIXi6lk2fS2wzZOSoh7iHm_ZP3UE&v=3.exp"></script><script src=/js/hpneo.gmaps.js></script><script src=/js/gmaps.init.js></script><script src=/js/front.js></script><script src=/js/owl.carousel.min.js></script></body></html>